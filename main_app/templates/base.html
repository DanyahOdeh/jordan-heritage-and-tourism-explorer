{% load static %}
<!DOCTYPE html>
<html lang="en" dir="LTR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="{% static 'images/logo.png' %}">
    <title>{% block title %}Jordan Heritage & Tourism Explorer{% endblock %}</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="{% static 'css/base.css' %}">
    {% block head %}

    {% endblock head %} 
</head>
<body>
    
    <header class="navbar-container">
  <div class="navbar">
    <!-- Logo -->
    <div class="logo">
      <img src="{% static 'images/logo.png' %}" alt="Jordan Logo">
      <div class="logo-text">
        Jordan Tourism & Heritage Explorer
      </div>
    </div>

    <!-- Hamburger Icon -->
    <div class="hamburger" id="hamburger">
      <span></span>
      <span></span>
      <span></span>
    </div>

    <!-- Navigation Links -->
    <nav class="nav-links" id="nav-links">
      <a href="{% url 'home' %}" class="active">Home</a>
      <a href="{% url 'destination_list' %}">Destinations</a>

      {% if user.is_authenticated %}
        {% comment %} <a href="{% url 'destination_list' %}">Destinations</a> {% endcomment %}
        <a href="{% url 'add_destination' %}">Add New</a>
      {% endif %}

      <a href="{% url 'about' %}">About</a>

      <!-- Auth Links also visible in dropdown -->
      <div class="mobile-auth">
        {% if user.is_authenticated %}
          <a href="{% url 'user_dashboard' user.id %}" class="btn-auth login">{{ user.username }}</a>
          <form method="post" action="{% url 'logout' %}" class="logout-form">
            {% csrf_token %}
            <button type="submit" class="btn-auth signup logout-button">Logout</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}" class="btn-auth login">Login</a>
          <a href="{% url 'signup' %}" class="btn-auth signup">Sign Up</a>
        {% endif %}
      </div>
    </nav>

    <!-- Desktop Auth Buttons -->
    <div class="search-login">
      {% if user.is_authenticated %}
        <a href="{% url 'user_dashboard' user.id %}" class="btn-auth login">{{ user.username }}</a>
        <form method="post" action="{% url 'logout' %}" class="logout-form">
          {% csrf_token %}
          <button type="submit" class="btn-auth signup logout-button">Logout</button>
        </form>
      {% else %}
        <a href="{% url 'login' %}" class="btn-auth login">Login</a>
        <a href="{% url 'signup' %}" class="btn-auth signup">Sign Up</a>
      {% endif %}
    </div>
  </div>
</header>

    {% if messages %}
      <div class="messages-container" style="width:90%;margin:20px auto;">
        {% for message in messages %}
          <div class="alert {{ message.tags }} alert-dismissible fade show" 
              style="padding:12px 18px;margin-bottom:10px;border-radius:6px;
                      {% if message.tags == 'success' %}background-color:#d1e7dd;color:#0f5132;
                      {% elif message.tags == 'error' %}background-color:#f8d7da;color:#842029;
                      {% elif message.tags == 'warning' %}background-color:#fff3cd;color:#664d03;
                      {% else %}background-color:#cff4fc;color:#055160;{% endif %}">
            {{ message }}
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"
                    style="float:right;border:none;background:none;font-size:20px;cursor:pointer;">×</button>
          </div>
        {% endfor %}
      </div>
    {% endif %}


    <main> 
        {% block content %}{% endblock %}
    </main>
    
    <script>
        const links = document.querySelectorAll('.nav-links a');
        const currentPath = window.location.pathname;
        
        links.forEach(link => {
            link.classList.remove('active'); 
            if (link.getAttribute('href') === currentPath) {
                link.classList.add('active');
            }
        });
    </script>

    <footer>
        <p> Done by Route-962 Team </p>
        <p>© 2025 All rights reserved. Jordan Heritage & Tourism Explorer</p>
    </footer>

    <script>
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('nav-links');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });
    </script>

</body>
</html>